<html>
<head>
<title>Building Demolition Simulator</title>
</head>
<body>
  <div id="simulator">
    <h1>Building Demolition Simulator</h1>
    <p>Select a building, place charges by clicking, then detonate in sequence!</p>
    <select id="building-select">
      <option value="skyscraper">Skyscraper</option>
      <option value="hotel">Hotel</option>
      <option value="factory">Factory</option>
    </select>
    <div id="building-container">
      <div id="skyscraper" class="building active">
        <div class="floor" style="background-color: #A0522D; height: 20%; bottom: 0%;">
          <div class="window" style="left: 30px;"></div>
          <div class="window" style="left: 90px;"></div>
          <div class="window" style="left: 150px;"></div>
          <div class="window" style="left: 210px;"></div>
        </div>
        <div class="floor" style="background-color: #D2691E; height: 20%; bottom: 20%;">
          <div class="window" style="left: 30px;"></div>
          <div class="window" style="left: 90px;"></div>
          <div class="window" style="left: 150px;"></div>
          <div class="window" style="left: 210px;"></div>
        </div>
        <div class="floor" style="background-color: #CD853F; height: 20%; bottom: 40%;">
          <div class="window" style="left: 30px;"></div>
          <div class="window" style="left: 90px;"></div>
          <div class="window" style="left: 150px;"></div>
          <div class="window" style="left: 210px;"></div>
        </div>
        <div class="floor" style="background-color: #DEB887; height: 20%; bottom: 60%;">
          <div class="window" style="left: 30px;"></div>
          <div class="window" style="left: 90px;"></div>
          <div class="window" style="left: 150px;"></div>
          <div class="window" style="left: 210px;"></div>
        </div>
        <div class="floor" style="background-color: #F4A460; height: 20%; bottom: 80%;">
          <div class="window" style="left: 30px;"></div>
          <div class="window" style="left: 90px;"></div>
          <div class="window" style="left: 150px;"></div>
          <div class="window" style="left: 210px;"></div>
        </div>
      </div>
      <div id="hotel" class="building">
        <div class="floor" style="background-color: #8B4513; height: 25%; bottom: 0%;">
          <div class="window" style="left: 30px;"></div>
          <div class="window" style="left: 120px;"></div>
          <div class="window" style="left: 210px;"></div>
        </div>
        <div class="floor" style="background-color: #D2691E; height: 25%; bottom: 25%;">
          <div class="window" style="left: 30px;"></div>
          <div class="window" style="left: 120px;"></div>
          <div class="window" style="left: 210px;"></div>
        </div>
        <div class="floor" style="background-color: #CD853F; height: 25%; bottom: 50%;">
          <div class="window" style="left: 30px;"></div>
          <div class="window" style="left: 120px;"></div>
          <div class="window" style="left: 210px;"></div>
        </div>
        <div class="floor" style="background-color: #DEB887; height: 25%; bottom: 75%;">
          <div class="window" style="left: 30px;"></div>
          <div class="window" style="left: 120px;"></div>
          <div class="window" style="left: 210px;"></div>
        </div>
      </div>
      <div id="factory" class="building">
        <div class="floor" style="background-color: #696969; height: 60%; bottom: 0%;">
          <div class="window" style="height: 80px; left: 60px;"></div>
          <div class="window" style="height: 80px; left: 180px;"></div>
        </div>
        <div class="floor" style="background-color: #A9A9A9; height: 40%; bottom: 60%;">
          <div class="window" style="height: 60px; left: 30px;"></div>
          <div class="window" style="height: 60px; left: 120px;"></div>
          <div class="window" style="height: 60px; left: 210px;"></div>
        </div>
      </div>
      <div id="dust"></div>
    </div>
    <button id="detonate">Detonate</button>
    <button id="reset">Reset</button>
  </div>

  <script>
    const buildingContainer = document.getElementById('building-container');
    const dust = document.getElementById('dust');
    const detonateBtn = document.getElementById('detonate');
    const resetBtn = document.getElementById('reset');
    const buildingSelect = document.getElementById('building-select');
    let charges = [];
    let currentBuilding = document.querySelector('.building.active');

    buildingSelect.addEventListener('change', (e) => {
      document.querySelectorAll('.building').forEach(building => {
        building.classList.remove('active');
      });
      currentBuilding = document.getElementById(e.target.value);
      currentBuilding.classList.add('active');
      resetSimulation();
    });
